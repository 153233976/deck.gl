<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <title>Interleaving deck.gl with Mapbox Layers | WebGL visualization</title>
    <link rel="stylesheet" id="font-link" href="https://d1a3f4spazzrp4.cloudfront.net/uber-fonts/3.1.0/refresh.css">

    <meta name="description" content="WebGL-based visualization examples using deck.gl">

    <link rel="icon" type="img/ico" href="https://uber.github.io/deck.gl/favicon.ico">

    <!-— facebook open graph tags -->
    <meta property="og:url" content="https://uber.github.io/deck.gl/showcases/gallery" />
    <meta property="og:title" content="Interleaving deck.gl with Mapbox Layers | WebGL visualization" />
    <meta property="og:description" content="WebGL-based visualization examples using deck.gl" />
    <meta property="og:site_name" content="deck.gl" />
    <meta property="og:image" content="https://uber.github.io/deck.gl/showcases/gallery/images/mapbox-layer.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="800" />
    <meta property="og:image:height" content="480" />
    
    <!-— twitter card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uber">
    <meta name="twitter:creator" content="@uber">
    <meta name="twitter:title" content="Interleaving deck.gl with Mapbox Layers | WebGL visualization">
    <meta name="twitter:description" content="WebGL-based visualization examples using deck.gl">
    <meta name="twitter:image" content="https://uber.github.io/deck.gl/showcases/gallery/images/mapbox-layer.jpg" />

    <style>
      body {font-family: ff-clan-web-pro, "Helvetica Neue", Helvetica, sans-serif !important; font-size: 12px;}
      #container {width: 100%; max-width: 960px; padding: 40px 12px; margin: auto;}
      #source {margin: 12px 0; border: solid 1px #ccc; padding: 24px}
      #links {margin: 12px 0;}
      #links a {text-decoration: none; color: #444;}
      #links a:hover {color: #08f;}
    </style>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7157694-83', 'auto');
  ga('send', 'pageview');
</script>
  </head>
  <body>
    <div id="container">
      <h1>Interleaving deck.gl with Mapbox Layers</h1>
      <div id="links">
        <a href="./">↩ Back to Gallery</a>
      </div>
      <h2>Demo</h2>
      <iframe width="100%" height="450" frameborder="0" src="data:text/html;charset=utf-8,%3Chtml%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Ctitle%3EInterleaving%20deck.gl%20with%20Mapbox%20Layers%3C/title%3E%0A%20%20%20%20%3Cscript%20src=%22https://unpkg.com/deck.gl@%5E6.2.0/deckgl.min.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src=%22https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js%22%3E%3C/script%3E%0A%20%20%3C/head%3E%0A%0A%20%20%3Cbody%20style=%22margin:0%22%3E%3C/body%3E%0A%0A%20%20%3Cscript%20type=%22text/javascript%22%3E%0A%0A%20%20%20%20const%20%7BMapboxLayer,%20ScatterplotLayer%7D%20=%20deck;%0A%0A%20%20%20%20mapboxgl.accessToken%20=%20'pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoiY2pwY3owbGFxMDVwNTNxcXdwMms2OWtzbiJ9.1PPVl0VLUQgqrosrI2nUhg';%0A%0A%20%20%20%20const%20map%20=%20new%20mapboxgl.Map(%7B%0A%20%20%20%20%20%20container:%20document.body,%0A%20%20%20%20%20%20style:%20'mapbox://styles/mapbox/light-v9',%0A%20%20%20%20%20%20center:%20%5B-122.4,%2037.79%5D,%0A%20%20%20%20%20%20zoom:%2015,%0A%20%20%20%20%20%20pitch:%2060%0A%20%20%20%20%7D);%0A%0A%20%20%20%20map.on('load',%20()%20=%3E%20%7B%0A%20%20%20%20%20%20const%20firstLabelLayerId%20=%20map.getStyle().layers.find(layer%20=%3E%20layer.type%20===%20'symbol').id;%0A%0A%20%20%20%20%20%20map.addLayer(%7B%0A%20%20%20%20%20%20%20%20'id':%20'3d-buildings',%0A%20%20%20%20%20%20%20%20'source':%20'composite',%0A%20%20%20%20%20%20%20%20'source-layer':%20'building',%0A%20%20%20%20%20%20%20%20'filter':%20%5B'==',%20'extrude',%20'true'%5D,%0A%20%20%20%20%20%20%20%20'type':%20'fill-extrusion',%0A%20%20%20%20%20%20%20%20'minzoom':%2015,%0A%20%20%20%20%20%20%20%20'paint':%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'fill-extrusion-color':%20'#aaa',%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20use%20an%20'interpolate'%20expression%20to%20add%20a%20smooth%20transition%20effect%20to%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20buildings%20as%20the%20user%20zooms%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20'fill-extrusion-height':%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22interpolate%22,%20%5B%22linear%22%5D,%20%5B%22zoom%22%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015,%200,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015.05,%20%5B%22get%22,%20%22height%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20'fill-extrusion-base':%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22interpolate%22,%20%5B%22linear%22%5D,%20%5B%22zoom%22%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015,%200,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015.05,%20%5B%22get%22,%20%22min_height%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20'fill-extrusion-opacity':%20.6%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D,%20firstLabelLayerId);%0A%0A%20%20%20%20%20%20map.addLayer(new%20MapboxLayer(%7B%0A%20%20%20%20%20%20%20%20id:%20'deckgl-circle',%0A%20%20%20%20%20%20%20%20type:%20ScatterplotLayer,%0A%20%20%20%20%20%20%20%20data:%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7Bposition:%20%5B-122.402,%2037.79%5D,%20color:%20%5B255,%200,%200%5D,%20radius:%201000%7D%0A%20%20%20%20%20%20%20%20%5D,%0A%20%20%20%20%20%20%20%20getPosition:%20d%20=%3E%20d.position,%0A%20%20%20%20%20%20%20%20getColor:%20d%20=%3E%20d.color,%0A%20%20%20%20%20%20%20%20getRadius:%20d%20=%3E%20d.radius,%0A%20%20%20%20%20%20%20%20opacity:%200.3%0A%20%20%20%20%20%20%7D),%20firstLabelLayerId);%0A%0A%20%20%20%20%20%20map.addLayer(new%20MapboxLayer(%7B%0A%20%20%20%20%20%20%20%20id:%20'deckgl-arc',%0A%20%20%20%20%20%20%20%20type:%20ArcLayer,%0A%20%20%20%20%20%20%20%20data:%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7Bsource:%20%5B-122.3998664,%2037.7883697%5D,%20target:%20%5B-122.400068,%2037.7900503%5D%7D%0A%20%20%20%20%20%20%20%20%5D,%0A%20%20%20%20%20%20%20%20getSourcePosition:%20d%20=%3E%20d.source,%0A%20%20%20%20%20%20%20%20getTargetPosition:%20d%20=%3E%20d.target,%0A%20%20%20%20%20%20%20%20getSourceColor:%20%5B255,%20208,%200%5D,%0A%20%20%20%20%20%20%20%20getTargetColor:%20%5B0,%20128,%20255%5D,%0A%20%20%20%20%20%20%20%20getStrokeWidth:%208%0A%20%20%20%20%20%20%7D))%0A%20%20%20%20%7D);%0A%0A%20%20%3C/script%3E%0A%3C/html%3E" ></iframe>
      <h2>Source</h2>
      <div id="source">
        <code class="prettyprint">&lt;html&gt;<br/>&nbsp;&nbsp;&lt;head&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Interleaving deck.gl with Mapbox Layers&lt;/title&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="https://unpkg.com/deck.gl@^6.2.0/deckgl.min.js"&gt;&lt;/script&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js"&gt;&lt;/script&gt;<br/>&nbsp;&nbsp;&lt;/head&gt;<br/><br/>&nbsp;&nbsp;&lt;body style="margin:0"&gt;&lt;/body&gt;<br/><br/>&nbsp;&nbsp;&lt;script type="text/javascript"&gt;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;const {MapboxLayer, ScatterplotLayer} = deck;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;mapboxgl.accessToken = '&lt;mapbox-access-token&gt;';<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;const map = new mapboxgl.Map({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container: document.body,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style: 'mapbox://styles/mapbox/light-v9',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;center: [-122.4, 37.79],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zoom: 15,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pitch: 60<br/>&nbsp;&nbsp;&nbsp;&nbsp;});<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;map.on('load', () =&gt; {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const firstLabelLayerId = map.getStyle().layers.find(layer =&gt; layer.type === 'symbol').id;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.addLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'id': '3d-buildings',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'source': 'composite',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'source-layer': 'building',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'filter': ['==', 'extrude', 'true'],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'type': 'fill-extrusion',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'minzoom': 15,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'paint': {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-color': '#aaa',<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// use an 'interpolate' expression to add a smooth transition effect to the<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// buildings as the user zooms in<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-height': [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"interpolate", ["linear"], ["zoom"],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15, 0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.05, ["get", "height"]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-base': [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"interpolate", ["linear"], ["zoom"],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15, 0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.05, ["get", "min_height"]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-opacity': .6<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, firstLabelLayerId);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.addLayer(new MapboxLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: 'deckgl-circle',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: ScatterplotLayer,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{position: [-122.402, 37.79], color: [255, 0, 0], radius: 1000}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPosition: d =&gt; d.position,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getColor: d =&gt; d.color,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getRadius: d =&gt; d.radius,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opacity: 0.3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}), firstLabelLayerId);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.addLayer(new MapboxLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: 'deckgl-arc',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: ArcLayer,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{source: [-122.3998664, 37.7883697], target: [-122.400068, 37.7900503]}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getSourcePosition: d =&gt; d.source,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTargetPosition: d =&gt; d.target,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getSourceColor: [255, 208, 0],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTargetColor: [0, 128, 255],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getStrokeWidth: 8<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;});<br/><br/>&nbsp;&nbsp;&lt;/script&gt;<br/>&lt;/html&gt;</code>
      </div>
    </div>
  </body>
</html>